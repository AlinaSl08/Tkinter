from tkinter import *
from tkinter import messagebox


root = Tk()
#настройки
root.title("История любви")
root.geometry("500x400")
root.resizable(False, False)

#текстовое поле
story_text = Text(root, bg = "black", font = ("Comic Sans MS", 15), fg = "white", wrap=WORD, padx=20, pady=20)
story_text.grid(row=0, column=0, sticky="nsew")

#фрейм для кнопок
buttons_frame = Frame(root, bg= "black")
buttons_frame.grid(row=1, column=0, sticky="ew")

root.grid_rowconfigure(0, weight=1)  # текст растягивается по вертикали
root.grid_rowconfigure(1, weight=0)  # кнопки не растягиваются
root.grid_columnconfigure(0, weight=1)

#сценарий
scenes = {

    "artem_1": {
        "text": """Офис был почти пуст – большинство сотрудников уже разошлись по домам, но Артём задержался, разбирая отчёты. Вдруг дверь приоткрылась, и в кабинет робко заглянул Александр.""",
        "next": "artem_2"
    },

    "artem_2": {
        "text": """— Артём, ты ещё не ушёл? – его голос звучал мелодично, почти игриво.
Артём поднял взгляд от бумаг и невольно задержал его на фигуре коллеги. """,
        "next": "artem_3"
    },

    "artem_3": {
        "text": """Александр был одет в облегающую рубашку с расстёгнутыми верхними пуговицами, обнажающими хрупкую ключицу, и узкие брюки, подчёркивающие его стройные ноги.""",
        "next": "artem_4"
    },

    "artem_4": {
        "text": """— Нет, – ответил Артём, стараясь сохранить деловой тон. – Что-то нужно?
Александр улыбнулся, закручивая прядь светлых волос вокруг пальца.""",
        "next": "artem_5"
    },

    "artem_5": {
        "text": """"— Я просто подумал… может, поможешь мне разобрать документы? А то я что-то запутался…
Артём почувствовал лёгкое раздражение – он знал, что Александр специально тянет время, чтобы остаться с ним наедине. Но в то же время его взгляд скользнул по пухлым губам коллеги, и в груди защемило.""",
        "choices": {
            "Отказаться": "artem_resist1",
            "Согласиться": "artem_6"
        }
    },

    "artem_6": {
        "text": """— Ладно, – вздохнул он. – Показывай, что там у тебя.
Александр радостно подскочил и подошёл ближе, намеренно касаясь плечом Артёма, когда наклонялся над столом.""",
        "next": "artem_7"
    },

    "artem_7": {
        "text": """— Вот здесь, – он ткнул пальцем в бумагу, но Артём уже не слушал. Его внимание привлекло дуновение сладкого аромата духов Александра – лёгких, с нотками ванили.""",
    "next": "artem_8"
    },

    "artem_8": {
        "text": """— Ты специально так близко? – прошептал Артём, чувствуя, как учащается его пульс.""",
        "next": "artem_9"
    },
    "artem_9": {
        "text": """Александр притворно удивился, но в его глазах читался намёк.
— А что, разве нельзя?""",
        "next": "artem_10"
    },
    "artem_10": {
        "text": """Артём не выдержал. Он резко схватил Александра за запястье и притянул к себе.
— Ты играешь с огнём, – прошипел он.""",
        "choices": {
            "Остановиться": "artem_stop1",
            "Флиртовать": "artem_11"
        }
    },


#"choices": {"Смущенно промолчать": "artem_shy","Признаться": "artem_8"}




    "artem_11": {
        "text": """Александр замер, губы его слегка дрожали, но в глазах горел вызов.
— Может, мне это нравится?""",
        "next": "artem_12"
    },
"artem_12": {
        "text": """Артём не стал ждать. Он наклонился и грубо прижал свои губы к губам Александра. Тот вздохнул в поцелуй, мгновенно растекаясь в его объятиях. 
        Его руки обвились вокруг шеи Артёма, пальцы вцепились в волосы.""",
        "next": "artem_13"
    },
"artem_13": {
        "text": """Поцелуй был жадным, властным – Артём не давал ему и шанса на передышку, прижимая его к столу. 
        Александр сладко постанывал, его тело изгибалось, словно пытаясь стать ещё ближе.""",
        "next": "artem_14"
    },
"artem_14": {
        "text": """— Ты… ты такой грубый… – прошептал он, когда Артём перешёл к его шее, оставляя влажные следы по нежной коже.""",
        "next": "artem_15"
    },
"artem_15": {
        "text": """— А ты хотел нежности? – Артём ухмыльнулся, сжимая его бёдра.""",
        "next": "artem_16"
    },
"artem_16": {
        "text": """— Нет… – Александр зажмурился. – Я хочу, чтобы ты… чтобы ты…""",
        "next": "artem_17"
    },
"artem_17": {
        "text": """— Чтобы я что? – Артём провёл языком по его уху, заставив того содрогнуться.""",
        "next": "artem_18"
    },
"artem_18": {
        "text": """— Чтобы ты взял меня…""",
        "next": "artem_19"
    },
"artem_19": {
        "text": """Артём зарычал и резко развернул Александра, прижав его грудью к столу.
— Как же долго я этого ждал…""",
        "next": "artem_20"
    },
"artem_20": {
        "text": """Александр дрожал, чувствуя, как грудь Артёма прижимается к его спине, а сильные руки сковывают его запястья. Стол под ним слегка дрожал от их общего веса, бумаги разлетелись по полу, но сейчас это было последним, о чём он мог думать.""",
        "next": "artem_21"
    },
"artem_21": {
        "text": """— Артём… — его голос звучал прерывисто, почти моляще.""",
        "next": "artem_22"
    },
"artem_22": {
        "text": """— Ты же этого хотел, да? — мужчина провёл ладонью по его тонкой талии, ощущая, как тот выгибается под его прикосновением. — Весь день ходил, дразнил меня этими своими взглядами… этими губами…""",
        "next": "artem_23"
    },
"artem_23": {
        "text": """Александр не успел ответить — резкий шлёпок ладонью по его упругим ягодицам заставил его вскрикнуть.
— Тише, — прошептал Артём, прижимаясь губами к его шее. — А то кто-то услышит…""",
        "next": "artem_24"
    },
"artem_24": {
        "text": """Но Александру было всё сложнее сдерживать звуки. Каждое прикосновение Артёма — то ли пальцы, впивающиеся в его бёдра, то ли зубы, покусывающие чувствительную кожу плеча — заставляло его стонать.""",
        "next": "artem_25"
    },
"artem_25": {
        "text": """— Ты такой… такой… — он не находил слов, когда Артём одной рукой расстегнул его брюки, а другой продолжал удерживать его в покорном положении.""",
        "next": "artem_26"
    },
"artem_26": {
        "text": """— Такой какой? — насмешливо прошептал Артём, снимая с него последние преграды.""",
        "next": "artem_27"
    },
"artem_27": {
        "text": """— Такой властный… — выдохнул Александр, чувствуя, как его лицо заливается краской.""",
        "next": "artem_28"
    },
"artem_28": {
        "text": """Артём усмехнулся и наклонился к его уху:
— И это только начало.""",
        "next": "artem_29"
    },
"artem_29": {
        "text": """Александр не был невинным — он знал, чего хочет, но сейчас, под властными руками Артёма, он чувствовал себя совершенно беспомощным. Каждый жест, каждое движение дышало доминантностью, и это сводило его с ума.""",
        "next": "artem_30"
    },
"artem_30": {
        "text": """— Расслабься, — приказал Артём, смачивая пальцы и медленно подготавливая его.
Александр закусил губу, но не смог сдержать тихий стон, когда пальцы вошли в него.""",
        "choices": {
            "Доминировать": "artem_domination1",
            "Поддаться": "artem_31"
        }
    },


"artem_domination1": {
        "text": """Александр глубоко вдохнул, ощущая приближение Артёма. Но вместо того, чтобы сопротивляться, он осторожно взял инициативу в свои руки.""",
        "next": "artem_domination2"
    },
"artem_domination2": {
        "text": """— Нет… так не надо, — прошептал он твёрдо, мягко, но уверенно удерживая Артёма, — давай я сам решу, как будет.""",
        "next": "artem_domination3"
    },
"artem_domination3": {
        "text": """Артём замер, впервые ощущая, что контроль ускользает из его рук. Александр медленно переместил его руки, направляя движения и задавая темп. Каждый его жест был точным, властным, но в то же время нежным. Артём ощутил, как его собственная доминантность постепенно растворяется, уступая инициативе Александра.""",
        "next": "artem_34"
    },

"artem_31": {
        "text": """— Боже… — он вцепился в край стола, чувствуя, как его тело постепенно открывается.
Артём не спешил — он наслаждался каждой реакцией, каждым содроганием Александра.""",
        "next": "artem_32"
    },
"artem_32": {
        "text": """— Ты так красив вот так… — прошептал он, добавляя ещё один палец. — Полностью в моей власти…
Александр уже не мог отвечать — его дыхание стало прерывистым, а всё тело горело.""",
        "next": "artem_33"
    },
"artem_33": {
        "text": """Когда Артём наконец вошёл в него, Александр вскрикнул, но тут же прикусил губу, стараясь не шуметь.
— Да… вот так… — Артём начал двигаться, глубоко и медленно, заставляя Александра терять остатки контроля.""",
        "next": "artem_34"
    },

"artem_34": {
        "text": """Каждый толчок заставлял их обоих стонать — Александр в сладостном подчинении, Артём — в животном наслаждении властью.
— Ты… ты мой… — прошептал Артём, ускоряя ритм.""",
        "next": "artem_35"
    },

"artem_35": {
        "text": """Александр мог только кивнуть, чувствуя, как его сознание уплывает в море удовольствия.
Когда волна наслаждения наконец отступила, Александр лежал на столе, тяжело дыша, его светлые волосы растрепались, а губы были слегка припухшими от поцелуев.
""",
        "next": "artem_36"
    },
"artem_36": {
        "text": """Артём медленно отошёл, поправляя одежду, но его взгляд по-прежнему пылал желанием.
— Ну что… доволен? — спросил он, проводя рукой по бедру Александра.
""",
        "next": "artem_37"
    },
"artem_37": {
        "text": """Тот слабо улыбнулся:
— Не думаю, что это можно назвать просто "доволен"…""",
        "next": "artem_38"
    },
"artem_38": {
        "text": """Артём рассмеялся и наклонился, чтобы поцеловать его в лоб.
— Тогда, может, повторим?""",
        "next": "artem_39"
    },
"artem_39": {
        "text": """Александр зажмурился, но улыбка не сходила с его лица.
— Ты же знаешь, что я не откажусь…""",
        "next": "artem_end"
    },

    "artem_stop1": {
        "text": """Александр заметил, как Артём наклоняется к нему слишком близко. Он мягко, но твёрдо отстранил его руку.
— Стоп… хватит, — прошептал он, слегка прикрыв глаза. — Я не хочу так.
""",
        "next": "artem_stop2"
    },
"artem_stop2": {
        "text": """Артём замер, осознав резкость момента.
— Ладно… — пробормотал он, отпуская запястье. — Прости…""",
        "next": "artem_stop3"
    },
"artem_stop3": {
        "text": """Оба тяжело вздохнули. Атмосфера в кабинете снова стала рабочей: бумаги, документы, тихий шорох. Напряжение постепенно спало.
""",
        "next": "artem_end"
    },





    "artem_resist1": {
        "text": """Артём глубоко вздохнул, стараясь сохранить спокойствие.  
— Прости, Саня, но я уже собирался уходить. Мне нужно закончить эти отчёты дома. — сказал он твёрдо.  """,
        "next": "artem_resist2"
    },
"artem_resist2": {
        "text": """Александр слегка нахмурился, но кивнул, понимая отказ.  
— Ладно, — сказал он тихо и вышел из кабинета, оставив Артёма за столом.""",
        "next": "artem_resist3"
    },
"artem_resist3": {
        "text": """Комната снова погрузилась в тишину. Артём сосредоточился на работе, ощущая лёгкое облегчение и одновременно странное чувство упущенной возможности.""",
        "next": "artem_end"
    },

    "artem_end": {
        "text": """Конец""",
    }
}

def game_exit():
    answer = messagebox.askokcancel("Выход", "Вы точно хотите выйти?")
    if answer:
        root.destroy()

view_colors = {
    "dark": {"text_bg": "black", "text_fg": "white", "button_bg": "black"},
    "light": {"text_bg": "white", "text_fg": "black", "button_bg": "white"}
}

def change_theme(theme):
    story_text['bg'] = view_colors[theme]["text_bg"]
    story_text['fg'] = view_colors[theme]["text_fg"]
    buttons_frame['bg'] = view_colors[theme]["button_bg"]
    story_text['bg'] = view_colors[theme]["button_bg"]

#меню: выйти из игры, поменять тему
main_menu = Menu(root)

file_menu = Menu(main_menu, tearoff=0)
file_menu.add_command(label="Выход из игры", command=game_exit)
main_menu.add_cascade(label="Файл", menu=file_menu)

view_menu = Menu(main_menu, tearoff=0)
view_theme_menu = Menu(view_menu, tearoff=0)
view_theme_menu.add_command(label="Тёмная", command=lambda:change_theme("dark"))
view_theme_menu.add_command(label="Светлая", command=lambda:change_theme("light"))

view_menu.add_cascade(label="Тема", menu=view_theme_menu)
main_menu.add_cascade(label="Вид", menu=view_menu)

root.config(menu=main_menu)

current_scene = "artem_1"


def show_scene(scene_id):
    global current_scene
    current_scene = scene_id # запоминаем, где мы сейчас
    scene = scenes[scene_id] # берем сцену из словаря

    story_text.config(state=NORMAL)
    story_text.delete("1.0", END)
    story_text.insert(END, scene["text"])
    story_text.config(state=DISABLED)

    for widget in buttons_frame.winfo_children(): #«дай мне список всех элементов внутри этого фрейма»
        widget.destroy()

    if "choices" in scene:
        for btn_text, next_scene in scene["choices"].items():
            Button(
                buttons_frame,
                text=btn_text,
                font=("Comic Sans MS", 14),
                command=lambda s=next_scene: show_scene(s)
            ).pack(fill=X, pady=5)
    elif "next" in scene:
        Button(
            buttons_frame,
            text="Далее",
            font=("Comic Sans MS", 14),
            command=lambda s=scene["next"]: show_scene(s)
        ).pack()


show_scene(current_scene)


root.mainloop()